<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Shubh Shah | Data Analytics Portfolio</title>
    <meta
      name="description"
      content="Welcome to Shubh Shah's Data Analytics Portfolio. Explore data-driven insights and innovative solutions."
    />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="assets/style.css" />
    <style>
      /* Enhanced CSS with Modal and Dark Mode Fixes */
      body {
        margin: 0;
        font-family: "Arial", sans-serif;
        background: #f9f9f9;
        transition: background-color 0.3s, color 0.3s; /* Smooth transitions */
      }

      /* Hero Section Background for Light Mode */
      .hero-section {
        position: relative;
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
        background: url("assets/images/image01.png") center/cover no-repeat !important;
        background-blend-mode: overlay;
        padding: 2rem;
      }
      /* Hero Section Background for Dark Mode */
      body.dark .hero-section {
        background: url("assets/images/image02.png") center/cover no-repeat !important;
      }
      .hero-section::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        z-index: 1;
      }
      .hero-container {
        position: relative;
        z-index: 2;
        color: #fff;
        max-width: 800px;
      }
      .hero-container h1 {
        font-size: 3rem;
        margin: 0;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
      }
      .hero-container h3 {
        font-size: 1.5rem;
        margin: 0.5rem 0;
        color: #e0e0e0;
      }
      .hero-container p {
        font-size: 1.2rem;
        margin: 1rem 0;
      }
      .hero-buttons {
        margin-top: 2rem;
      }
      .hero-buttons button {
        padding: 0.8rem 1.5rem;
        margin: 0 0.5rem;
        font-size: 1rem;
        border: none;
        border-radius: 25px;
        cursor: pointer;
        transition: transform 0.3s, background 0.3s;
      }
      .hero-buttons button:first-child {
        background: #007acc;
        color: #fff;
      }
      .hero-buttons button:last-child {
        background: #fff;
        color: #007acc;
        border: 2px solid #007acc;
      }
      .hero-buttons button:hover {
        transform: scale(1.05);
      }

      .summary-section {
        padding: 4rem 2rem;
        text-align: center;
        background: #fff;
      }
      .summary-section h2 {
        font-size: 2rem;
        margin-bottom: 1rem;
      }
      .summary-section p {
        max-width: 700px;
        margin: 0 auto;
        line-height: 1.6;
        color: #333;
      }
      .projects-teaser {
        padding: 4rem 2rem;
        background: #f1f3f5;
        text-align: center;
      }
      .projects-grid {
        display: grid;
        grid-template-columns: repeat(3, 260px);
        gap: 2rem;
        max-width: 900px;
        margin: 2rem auto;
        justify-content: center;
      }
      .project-card {
        background: #fff;
        padding: 1rem;
        border-radius: 8px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        transition: transform 0.3s;
        display: flex;
        flex-direction: column;
        height: 100%;
        cursor: pointer;
      }
      .project-card:hover {
        transform: translateY(-5px);
      }
      .project-card img {
        width: 100%;
        height: 160px;
        object-fit: cover;
        border-radius: 4px;
        margin-bottom: 0.5rem;
      }
      .project-card h3 {
        margin: 0 0 0.5rem;
        font-size: 1.2rem;
        color: #333;
        text-align: center;
        text-decoration: underline;
      }
      .project-card p {
        margin: 0 0 0.5rem;
        color: #666;
        flex-grow: 1;
        font-size: 0.9rem;
        text-align: center;
      }
      @media (max-width: 900px) {
        .projects-grid {
          grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
        }
      }
      @media (max-width: 768px) {
        .hero-container h1 {
          font-size: 2rem;
        }
        .hero-container h3 {
          font-size: 1.2rem;
        }
        .hero-buttons button {
          display: block;
          margin: 0.5rem auto;
        }
      }

      /* Modal Styles (Copied from projects.html) */
      .modal {
        display: none;
        position: fixed;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.6);
        z-index: 2000;
        justify-content: center;
        align-items: center;
      }
      .modal-content {
        width: 800px;
        max-height: 90vh;
        overflow-y: auto;
        background-color: #fff;
        color: #333;
        border: 1px solid #dcdcdc;
        border-radius: 8px;
        padding: 2rem;
        position: relative;
      }
      .close-btn {
        position: absolute;
        top: 1rem;
        right: 1rem;
        font-size: 1.5rem;
        cursor: pointer;
        background: none;
        border: none;
        color: #333;
      }
      .detailed-view {
        display: block;
      }
      .detailed-view h3 {
        margin: 1rem 0 0.5rem;
        font-size: 1.25rem;
        font-weight: bold;
        text-decoration: underline;
      }
      .detailed-view p {
        line-height: 1.5;
        margin-bottom: 1rem;
      }
      .detailed-view ul {
        margin-left: 1.5rem;
        margin-bottom: 1rem;
      }
      .detailed-view li {
        margin-bottom: 0.5rem;
      }

      /* Dark Mode Adjustments (Explicit Values Matching projects.html) */
      body.dark {
        background-color: #1e1e1e;
        color: #f0f0f0;
      }
      body.dark .summary-section {
        background-color: #1e1e1e;
        color: #f0f0f0;
      }
      body.dark .summary-section p {
        color: #f0f0f0;
      }
      body.dark .projects-teaser {
        background-color: #1e1e1e;
        color: #f0f0f0;
      }
      body.dark .projects-grid .project-card {
        background-color: #2a2a2a; /* Matches projects.html */
        color: #f0f0f0;
        border: 1px solid #444; /* Matches projects.html */
      }
      body.dark .projects-grid .project-card h3 {
        color: #f0f0f0; /* Matches projects.html */
      }
      body.dark .projects-grid .project-card p {
        color: #ccc; /* Matches projects.html */
      }
      body.dark .hero-section::before {
        background: rgba(0, 0, 0, 0.1); /* Darker glassmorphism overlay */
      }
      body.dark .hero-buttons button {
        color: #fff;
        background-color: #005ec2;
      }
      body.dark .hero-buttons button:last-child {
        background-color: #1e1e1e;
        color: #007acc;
        border: 2px solid #007acc;
      }
      body.dark .modal-content {
        background-color: #2a2a2a; /* Matches projects.html */
        color: #f0f0f0;
        border: 1px solid #444; /* Matches projects.html */
      }
      body.dark .close-btn {
        color: #f0f0f0; /* Matches projects.html */
      }
    </style>
  </head>
  <body>
    <!-- Navbar -->
    <header class="navbar" role="banner">
      <div class="nav-content">
        <div class="logo">MyPortfolio</div>
        <nav class="menu" role="navigation">
          <a href="index.html" class="active">Home</a>
          <a href="about.html">About Me (Contact)</a>
          <a href="projects.html">Projects</a>
        </nav>
        <div class="theme-controls">
          <label class="switch">
            <input
              type="checkbox"
              id="darkModeToggle"
              aria-label="Toggle dark mode"
            />
            <span class="slider round"></span>
          </label>
          <button id="autoModeToggle" class="auto-switch">Auto</button>
        </div>
      </div>
    </header>

    <!-- Hero Section -->
    <section class="hero-section">
      <div class="hero-container">
        <h1>Hello, I'm Shubh Shah</h1>
        <h3>Welcome to my Portfolio Showcase</h3>
        <p>
          This portfolio serves to be a showcase of all of my projects
          throughout my college and future endeavors. Please look around, more
          will be added to this site.
        </p>
        <div class="hero-buttons">
          <button onclick="window.location.href='projects.html'">
            Explore My Work
          </button>
        </div>
      </div>
    </section>

    <!-- Executive Summary -->
    <section class="summary-section">
      <h2>Who I Am</h2>
      <p>
        I am a dedicated and detail-oriented
        <strong>Business Analytics</strong> graduate from
        <strong>San Jose State University</strong>, with a strong passion for
        <strong>Data Analytics</strong> and <strong>Data Engineering</strong>.
        My portfolio demonstrates my expertise in a wide range of tools and
        technologies, including <strong>SQL</strong>, <strong>Tableau</strong>,
        <strong>Excel</strong>, <strong>Python</strong>, <strong>R</strong>,
        <strong>Simio</strong> (simulation modeling), and <strong>C++</strong>.
      </p>
    </section>

    <!-- Recent Projects Section -->
    <section class="projects-teaser">
      <h2>Recent Projects</h2>
      <div class="projects-grid" id="recentProjects"></div>
    </section>

    <!-- Modal for Project Details -->
    <div id="projectModal" class="modal">
      <div class="modal-content">
        <button class="close-btn" id="modalCloseBtn">×</button>
        <div class="detailed-view">
          <h3>Introduction</h3>
          <p id="modalIntroduction"></p>
          <h3>Methodology</h3>
          <div id="modalMethodology"></div>
          <h3>Technologies</h3>
          <ul id="modalTechnologies"></ul>
          <h3>Study Background</h3>
          <p id="modalStory"></p>
          <h3>Collected Data</h3>
          <p id="modalCollectedData"></p>
          <h3>Conclusion</h3>
          <p id="modalConclusions"></p>
          <h3>Additional Resources</h3>
          <ul id="modalResources"></ul>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <footer class="footer" role="contentinfo">
      <p>© 2025 Shubh Shah. All Rights Reserved.</p>
    </footer>

    <!-- JavaScript to Load Top 3 Recent Projects and Open Modals -->
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        loadRecentProjects();
      });

      async function loadRecentProjects() {
        try {
          // Cache-busting to ensure fresh data
          const response = await fetch(
            `assets/projects.json?t=${new Date().getTime()}`
          );
          if (!response.ok)
            throw new Error(`HTTP error! Status: ${response.status}`);
          const projects = await response.json();
          console.log("Fetched projects:", projects); // Debug: Check data

          // Filter unique projects by ID
          const uniqueProjects = projects.filter(
            (p, i, self) => i === self.findIndex((t) => t.id === p.id)
          );
          // Sort by date descending
          uniqueProjects.sort((a, b) => new Date(b.date) - new Date(a.date));
          console.log("Sorted projects:", uniqueProjects); // Debug: Check sorting
          // Take top 3
          const recentProjects = uniqueProjects.slice(0, 3);
          console.log("Top 3 recent projects:", recentProjects); // Debug: Verify top 3

          if (recentProjects.length === 0)
            throw new Error("No projects found.");
          renderRecentProjects(recentProjects);
        } catch (error) {
          console.error("Error loading recent projects:", error);
          document.getElementById(
            "recentProjects"
          ).innerHTML = `<p>Failed to load projects: ${error.message}</p>`;
        }
      }

      function renderRecentProjects(projects) {
        const container = document.getElementById("recentProjects");
        if (!container) {
          console.error("Container #recentProjects not found.");
          return;
        }
        container.innerHTML = ""; // Clear previous content
        projects.forEach((project) => {
          const card = document.createElement("div");
          card.className = "project-card";
          card.innerHTML = `
            <img src="${
              project.thumbnail || "assets/images/default.png"
            }" alt="${project.title} Thumbnail">
            <h3>${project.title || "Untitled Project"}</h3>
            <p><strong>Date:</strong> ${project.date || "N/A"}</p>
            <p>${(project.description || "No description available.").substring(
              0,
              100
            )}...</p>
          `;
          card.addEventListener("click", () => openModal(project));
          container.appendChild(card);
        });
      }

      function openModal(project) {
        const modal = document.getElementById("projectModal");
        if (!modal) {
          console.error("Modal #projectModal not found.");
          return;
        }

        // Populate modal content
        document.getElementById("modalIntroduction").innerHTML =
          project.description || "No detailed description available.";
        document.getElementById("modalMethodology").innerHTML =
          project.methodology || "No methodology provided.";
        document.getElementById("modalTechnologies").innerHTML =
          project.technologies && project.technologies.length
            ? project.technologies.map((tech) => `<li>${tech}</li>`).join("")
            : "<li>No technologies listed</li>";
        document.getElementById("modalStory").innerHTML =
          project.overview?.story || "No background provided.";
        document.getElementById("modalCollectedData").innerHTML =
          project.overview?.collectedData || "No data collected.";
        document.getElementById("modalConclusions").innerHTML =
          project.overview?.conclusions || "No conclusions provided.";
        document.getElementById("modalResources").innerHTML =
          project.resources && project.resources.length
            ? project.resources
                .map(
                  (resource) => `
                    <li>
                      <strong>${resource.name || "Resource"}</strong> (${
                    resource.category || "N/A"
                  }) – 
                      <a href="${
                        resource.file_path || "#"
                      }" target="_blank">View</a> / 
                      <a href="${
                        resource.file_path || "#"
                      }" download>Download</a>
                    </li>`
                )
                .join("")
            : "<li>No additional resources available.</li>";

        modal.style.display = "flex"; // Show the modal
      }

      function closeModal() {
        const modal = document.getElementById("projectModal");
        if (modal) modal.style.display = "none";
      }

      // Event listeners for closing the modal
      document
        .getElementById("modalCloseBtn")
        ?.addEventListener("click", closeModal);
      window.addEventListener("click", (e) => {
        const modal = document.getElementById("projectModal");
        if (e.target === modal) closeModal();
      });
    </script>
    <script src="assets/script.js"></script>
  </body>
</html>
